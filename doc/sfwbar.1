'\" t
.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "SFWBAR" "" "" ""
.SH NAME
SFWBar \- S* Floating Window taskBar
.sp
test
:Copyright: GPLv3+
:Manual section: 1
.SH SYNOPSIS
.nf
\fBsfwbar\fP [options]
.fi
.sp
.SH DESCRIPTION
.sp
\fBSFWBar\fP is a taskbar for wayland compositors. Originally written for Sway,
it should work with any compositor supporting layer\-shell protocol. SFWBar
assists in handling of floating windows on a wayland desktop. It provides a
taskbar, a pager, a task switcher, a system tray, a floating window placement
engine, a simple widget set for display data extracted from various system
files.
SFWBar can work with any wayland compositor supporting layer shell protocol.
Taskbar and switcher require either sway or wlr\-foreign\-toplevel protocol
support. Placer and  pager require sway.
.SH OPTIONS
.sp
SFWBar executable can be invoked with the following options:
.INDENT 0.0
.TP
.B \-f | \-\-config
Specify a filename of a configuration file
.TP
.B \-c | \-\-css
Specify a filename of a css file
.TP
.B \-s | \-\-socket
Specify a location of sway ipc socket
.TP
.B \-m | \-\-monitor
Specify a monitor to display the bar on (\(dq\-m list\(dq to list available monitors)
.TP
.B \-b | \-\-bar_id
Specify a sway bar_id on which sfwbar will listen for status changes
.UNINDENT
.SH CONFIGURATION
.sp
SFWBar reads configuration from a config file (sfwbar.config by default). The
program checks users XDG config directory (usually ~/.config/sfwbar/) for this
file, followed by system xdg data directories. Additionally, user can specify
a location and a name of the config file using \fB\-f\fP command line option.
.sp
Appearance of the program can be specified using CSS properties, these
are sourced either from the css section of the main configuration file or
from a file with a .css extension with the same base name as the config file
located in the same directory as the config file. The name of the css file
can be also specified using \fB\-c\fP option.
.sp
Sfwbar can be restarted and configuration reloaded by sending a SIGHUP signal
to the sfwbar process (i.e. \fIkillall \-SIGHUP sfwbar\fP).
.sp
The config file consists of the following top level sections:
.SS Placer
.sp
Placer section enables intelligent placement of new floating windows. If
enabled the program will first attempt to place the window in a location, where
it won\(aqt overlap with other windows. If such location doesn\(aqt exist, the window
will be placed in a cascading pattern from top\-left to bottom\-right. The Placer
declaration accepts parameters \(dqxstep\(dq and \(dqystep\(dq that specify the
steps in the window cascade. These are specified in percentage of the desktop
dimensions. The cascade placement will start at a location specified by \(dqxorigin\(dq
\(dqyorigin\(dq parameters. I.e.:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
placer {
  xorigin = 5
  yorigin = 5
  xstep = 5
  ystep = 5
  children = false
}
.EE
.UNINDENT
.UNINDENT
.sp
\(dqchildren\(dq parameter specifies if new windows opened by a program with other
windows already opened should be placed. These are usually dialog windows and
SFWBar won\(aqt place them by default. If the placer section is not present in
the file, SFWBar will let the compositor determine the locations for new windows.
.SS Task Switcher
.sp
Task switcher implements a keyboard shortcut to cycle focus across windows
(i.e. Alt\-Tab). The action is triggered upon receiving a change in a bar
hidden_state property or signal SIGUSR1. This can be configured in Sway, via
one of the following bindings:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
bindsym Alt\-Tab bar hidden_state toggle
or
bindsym Alt\-Tab exec killall \-SIGUSR1 sfwbar
.EE
.UNINDENT
.UNINDENT
.sp
(for non\-sway compositors, use SIGUSR1 trigger)
.sp
NixOS + Hyprland (probably other non\-sway compositors) use:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
bind = ALT, Tab, exec, killall \-SIGUSR1 .sfwbar\-wrapped
.EE
.UNINDENT
.UNINDENT
.sp
Task switcher is configured in the \(dqswitcher\(dq section of the configuration file.
The following parameters are accepted:
.INDENT 0.0
.TP
.B interval
an timeout after the last task switch event after which the selected
window is activated
.TP
.B labels [true|false]
display window titles in the task list
.TP
.B icons [true|false]
display window icons in the task list
.TP
.B cols
a number of columns in the task list
.TP
.B css
css code applicable to the switcher grid. This property can only be set
to a static string, not an expression.
You can specify more detailed css code in the main CSS file. Using style
name #switcher for the task switcher window and the main grid and names
#switcher_normal and #switcher_active for inactive and active window
representations respectively.
.UNINDENT
.SS Layout
.sp
Defines the layout of the taskbar. The layout holds a set of widgets. Widgets
can be nested in case of a \fBgrid\fP widget, which acts as a container.
.sp
The following widget types are supported:
.INDENT 0.0
.TP
.B taskbar
a special widget displaying a list of all floating windows.
(requires a compositor supporting wlr\-foreign\-toplevel protocol or i3 ipc)
.TP
.B pager
a special widget displaying a list of all workspaces.
(requires a compositor supporting wlr\-foreign\-toplevel protocol or i3 ipc)
.TP
.B tray
a special widget displaying a list of tray icons received via status
notifier item interface
.TP
.B grid
a layout grid capable of containing other widgets. You can use these to
further subdivide each cell of the main grid and arrange items within it.
.TP
.B label
a label displaying text sourced from an expression. Labels accept pango
markup to further theme text within them.
.TP
.B scale
a progress bar with a progress value specified by an expression
.TP
.B chart
a chart plotting the value of the expression over time
.TP
.B image
display an icon or an image from a file. The name of an icon or a file is
specified by an expression and can change dynamically.
.TP
.B button
add a clickable button with an icon/image.
.UNINDENT
.sp
Each widget is placed within the parent grid. By default, widgets are placed
next to the previous widget along the \(dqdirection\(dq of the grid (left to right
by default). You can specify widget\(aqs positions within a grid by using a
property \(dqloc(x,y[,w,h])\(dq with the first two parameters specifying the location
of the widget within the parent grid and the last two parameters specifying the
widget dimensions in grid cells:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
layout \(dqid\(dq {
  label {
  style = \(dqmystyle\(dq
  value = SwapUsed / SwapTotal + \(dq%\(dq
  loc(2,1,1,1)
  }
}
.EE
.UNINDENT
.UNINDENT
.sp
The optional \(dqid\(dq string of the layout, specifies the bar to populate and can
control positioning of the grid within a bar using syntax of \(dqname:position\(dq,
valid positions are start, center and end. This allows placement of some
widgets in the center of the bar. In case of a single bar, the name of a bar
can be omitted, i.e. \(dq:center\(dq.
External widgets can be included in layout using the following syntax:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
layout {
  include(\(dqMyWidget.widget\(dq)
}
.EE
.UNINDENT
.UNINDENT
.sp
The above will include all scanner variables data and widget sub\-layout from
file MyWidget.widget
.sp
Grid widgets can contain other widgets, these are declared within the grid
definition i.e.
.INDENT 0.0
.INDENT 3.5
.sp
.EX
grid {
  css = \(dq* { border: none }\(dq

  label \(dqid\(dq {
    ...
  }
}
.EE
.UNINDENT
.UNINDENT
.sp
Widgets can optionally have unique id\(aqs assigned to them in order to allow
manipulating them in the future.
.sp
All widgets can have the following properties:
.INDENT 0.0
.TP
.B value
an expression specifying the value to display. This can be a static value
(i.e. \fB\(dqstring\(dq\fP or \fB1\fP) or an expression (i.e.
\fB\(dqValue is:\(dq + $MyString\fP or \fB2 * MyNumber.val\fP). See \fBexpressions\fP
section for more detail.
For \fBLabel\fP widgets value tells text to display.
For \fBScale\fP widgets it specifies a fraction to display.
For \fBChart\fP widgets it specifies a fraction of the next datapoint.
For \fBImage\fP widgets and buttons it provides an icon or an image file name.
.TP
.B style
a style name for the widget. Styles can be used in CSS to theme widgets.
Multiple widgets can have the same style. A style name can be used in css
using gtk+ named widget convention, i.e. \fBlabel#mystyle\fP\&. Style property
can be set to an expression to change styles in response to changes in
system parameters.
.TP
.B tooltip
sets a tooltip for a widget. A tooltip can be a static value or an
expression. In case of the latter, the tooltip will be dynamically
updated every time it pops up.
.TP
.B interval
widget update frequency in milliseconds..
.TP
.B trigger
trigger on which event updates. Triggers are emitted by Client sources
a widget should not have both an interval and a trigger specified.
(if both are specified, interval is ignored and trigger is used).
.TP
.B css
additional css properties for the widget. These properties will only apply to
the widget in question. You can have multiple instances of the css property
in a single widget definition and they all will be applied in the order of
their occurence. css property value can only be a static string, not an
expression.
.TP
.B action
an action to execute upon interaction with a widget. Actions can be attached
to any widget. Multiple actions can be attached to various pointer events.
The notation is \fBaction[<event>] = <action>\fP\&.  Event values are 1,2,3 or
LeftClick, MiddleClick or RightClick respectively. For mouse scroll events,
use values 4,5,6,7,8 or ScrollUp, ScrollDown, ScrollLeft, ScrollRight and
Drag respectively. If no index is specified the action is attached to a left
mouse button click.
Additionallly, modifiers can be specified using the notation of
\fB[Modifier+]Index\fP\&. I.e. \fBaction[Ctrl+LeftClick]\fP\&. The following
modifiers supported: Shift, Ctrl, Mod1, Mod2, Mod3, Mod4, Mod5, Super, Hyper,
and Meta. Multiple modifiers can be added, i.e.
\fBaction[Ctrl+Shift+ScrollUp]\fP\&. action[0] will be executed on startup. You
can use this action to set initial configuration for a widget.  See
\fBActions\fP section for more details on how actions are specified.
.UNINDENT
.sp
\fBTaskbar\fP widget may contain the following options
.INDENT 0.0
.TP
.B labels [true|false]
an indicator whether to display an application title within the taskbar
.TP
.B icons [true|false]
an indicator whether to display application icons within the taskbar
.TP
.B filter_output [true|false]
This property is deprecated, please use \fBfilter\fP instead.
specifies whether taskbar should only list windows present on the same
output as the taskbar
.TP
.B filter [output|workspace]
Specifies whether taskbar should only list windows present on the same
output or workspace as the taskbar itself.
.TP
.B title_width
set maximum width of an application title in characters
.TP
.B sort [true|false]
setting of whether taskbar items should be sorted. If the items are not
sorted, user can sort them manually via drag\-and\-drop mechanism.
Items are sorted by default, set this to false to enable drag\-and\-drop.
.TP
.B rows
a number of rows in a taskbar.
.TP
.B cols
a number of columns in a taskbar.
If both rows and cols are specified, rows will be used. If neither is
specified, the default is rows=1
.TP
.B group [popup|pager|false]
if set to true, the taskbar items will be grouped. Supported grouppings
are: popup and pager. In a popup grouping windows are grouped by app_id,
the main taskbar will contain one item per app_id with an icon and a
label set to app_id. On over, it will popup a \(dqgroup taskbar\(dq containing
items for individual windows.
In a pager grouping mode, the taskbar is partitioned into workspaces and
each workspace contains windows belonging to it. Dragging windows from
one workspace to another moves it to a destination workspace. (currently
this is only supported with sway and hyprland compositors, support for
other compositors requires adoption of new wayland protocols).
You can specify taskbar parameters for the group taskbars using group
prefix, i.e. \fBgroup cols = 1\fP\&. The properties supported for groups
are cols, rows, style, css, title_width, labels, icons.
.UNINDENT
.sp
\fBLayout\fP objects may have the following options
.INDENT 0.0
.TP
.B sensor <timeout>
Specify whether the bar should be hidden once the pointer leaves the bar
window. Once hidden, the bar will popup again if the pointer touches the
sensor located along the screen edge along which the bar is placed.
A numeric value specifies the bar pop\-down delay in milliseconds. If the
timeout is zero, the bar will always be visible.
.TP
.B size = <string>
set size of the bar (width for top or bottom bar, height for left or right
bar). The argument is a string. I.e. \(dq800\(dq for 800 pixels or \(dq50%\(dq for
50% of screen size
.TP
.B monitor = <string>
assign bar to a given monitor. The  monitor name can be prefixed by
\(dqstatic:\(dq, i.e. \(dqstatic:eDP\-1\(dq. if this is set and the specified monitor
doesn\(aqt exist or gets disconnected, the bar will not jump to another montior,
but will be hidden and won\(aqt reappear until the monitor is reconnected.
.TP
.B mirror = <string>
mirror the bar to monitors matching any of the specified patterns.  The
string parameter specifies a string list of patters to match the monitors
against, i.e. \fI\(dqeDP\-*\(dq, \(dqHDMI\-1\(dq\fP will mirror to any monitor with name
starting with \(dqeDP\-\(dq or monitor named \(dqHDMI\-1\(dq. Patterns starting with \(aq!\(aq
will block the bar from being mirrored to a matching monitor. The patterns
are specified in glob style \(aq*\(aq and \(aq?\(aq are used as wildcards. The simplest
use is \fImirror = \(dq*\(dq\fP, which will mirror the bar across all monitors.
.TP
.B layer = <string>
move bar to a specified layer (supported parameters are \(dqtop\(dq, \(dqbottom\(dq,
\(dqbackground\(dq and \(dqoverlay\(dq.
.TP
.B margin = <string>
set margin around the bar to the number of pixels specified by string.
.TP
.B exclusive_zone <string>
specify exclusive zone policy for the bar window. Acceptable values are
\(dqauto\(dq, \(dq\-1\(dq, \(dq0\(dq or positive integers. These have meanings in line with
exclusive zone setting in the layer shell protocol. Default value is \(dqauto\(dq
.TP
.B sway_bar_id <string>
specify bar ID to listen on for mode and hidden_state signals. If no
bar ID is specified, SfwBar will listen to signals on all IDs
.UNINDENT
.sp
\fBPager\fP widget may contain the following options
.INDENT 0.0
.TP
.B preview [true|false]
specifies whether workspace previews are displayed on mouse hover over
pager buttons
.TP
.B sort [true|false]
setting of whether pager items should be sorted. If the items are not
sorted, user can sort them manually via drag\-and\-drop mechanism.
Items are sorted by default, set this to false to enable drag\-and\-drop.
.TP
.B pins
a list of \(dqpinned\(dq workspaces. These will show up in the pager even if the
workspace is empty.
.TP
.B rows
a number of rows in a pager.
.TP
.B cols
a number of columns in a pager.
If both rows and cols are specified, rows will be used. If neither is
specified, the default is rows=1
.UNINDENT
.sp
\fBtray\fP widget may contain the following options
.INDENT 0.0
.TP
.B rows
a number of rows in a pager.
.TP
.B cols
a number of columns in a pager.
If both rows and cols are specified, rows will be used. If neither is
specified, the default is rows=1
.TP
.B sort [true|false]
setting of whether tray items should be sorted. If the items are not
sorted, user can sort them manually via drag\-and\-drop mechanism.
Items are sorted by default, set this to false to enable drag\-and\-drop.
.UNINDENT
.sp
\fBpopup\fP window may contain the following options
.INDENT 0.0
.TP
.B AutoClose [true|false]
specify whether the popup window should close if user clicks anywhere outside
of the window.
.UNINDENT
.SS PopUp
.sp
Popup windows can be defined the same way as layouts. The only difference is
that popup\(aqs are not part of a bar and will not be displayed by default.
Instead they are displayed when a PopUp action is invoked on a widget. i.e.:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
PopUp \(dqMyPopup\(dq {
  label { value = \(dqtest\(dq }
}

Layout {
  label {
    value = \(dqclick me\(dq
    action = PopUp \(dqMyPopup\(dq
  }
}
.EE
.UNINDENT
.UNINDENT
.sp
The PopUp action toggles visibility of the popup window. I.e. the first time
it\(aqs invoked, the window will pop up and on the second invocation it will pop
down. As a result it should be safe to bind the PopUp to multiple widgets.
.SS Menus
.sp
User defined menus can be attached to any widget (see \fBaction\fP widget
property). Menus are defined using a Menu section in the config file.
The example syntax is as following:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
menuclear(\(dqmenu_name\(dq)
menu (\(dqmenu_name\(dq) {
  item(\(dqitem1\(dq, Exec \(dqcommand\(dq)
  separator
  submenu(\(dqsub\(dq,\(dqmysubmenu\(dq) {
    item(\(dqitem2\(dq, SwayCmd \(dqfocus next\(dq)
  }
}
.EE
.UNINDENT
.UNINDENT
.sp
Command MenuClear deletes any existing items from a menu.
Each menu has a name used to link the menu to the widget action and a
list of menu items. If a menu with the same name is defined more than
once, the items from subsequent declarations will be appended to the
original menu. If you want to re\-define the menu, use MenuClear action
to clear the original menu.
.sp
The following menu items are supported:
.INDENT 0.0
.TP
.B item
an actionable menu item. This item has three parameters, the first one
is a label, the second is an action to execute when the item is activated,
the third is an option id you can use to delete the item later if needed.
See \fBActions\fP section for more details on supported actions.
.TP
.B separator
a menu separator. This item has no parameters
.TP
.B submenu
attach a submenu. The first parameter parameter is a label to display in the
parent menu, the second optional parameter is a menu name, if a menu name is
assigned, the third optional parameter is an id you can use later to delete
the submenu using \fIMenuItemClear\fP action. Further items can be added to a
submenu as to any other menu.
.UNINDENT
.SS Triggers
.sp
Triggers are emitted in response to various events, such as compositor state
changes, real time signals or notifications from modules. Some triggers can
be defined as part of the configuration (i.e. SocketClient or ExecClient
scanner sources), others are built in, or defined in modules.
.sp
Built\-in triggers are:
.TS
box center;
l|l.
T{
SIGRTMIN+X
T}	T{
RT signal SIGRTMIN+X has been received (X is a number)
T}
_
T{
sway
T}	T{
Data has been received on SwayClient scanner source
T}
_
T{
mpd
T}	T{
Data has been received on MpdClient scanner source
T}
_
T{
<output>\-connected
T}	T{
an output has been connected (i.e. eDP\-1\-connected)
T}
_
T{
<output>\-disconnected
T}	T{
an output has been disconnected
T}
.TE
.SS Actions
.sp
Actions can be attached to click and scroll events for any widget or to items
within a menu. Actions can be conditional on a state of a window or a widget
they refer to and some actions may require a parameter. Conditions are specified
in square brackets prior to the action i.e. \fB[Minimized]\fP and can be inverted
using \fB!\fP or joined using \fB|\fP i.e. \fB[!Minimized | Focused]\fP\&. All
conditions on the list must be satisfied. Supported conditions are:
\fBMinimized\fP, \fBMaximized\fP, \fBFocused\fP, \fBFullScreen\fP and
\fBUserState\fP
.sp
Actions can be activated upon receipt of a trigger from one of the client type
sources, using TriggerAction top\-level keyword. I.e.
.INDENT 0.0
.INDENT 3.5
.sp
.EX
TriggerAction \(dqmytrigger\(dq, Exec \(dqMyCommand\(dq
.EE
.UNINDENT
.UNINDENT
.sp
Parameters are specified as strings immediately following the relevant action.
I.e. \fBMenu \(dqWindowOps\(dq\fP\&. Some actions apply to a window, if the action is
attached to taskbar button, the action will be applied to a window referenced
by the button, otherwise, it will apply to the currently focused window. The
following action types are supported:
.INDENT 0.0
.TP
.B Config <string>
Process a snippet of configuration file. This action permits changing the
bar configuration on the fly
.TP
.B Exec <string>
execute a shell command
.TP
.B Function [<addr>,]<string>
Execute a function. Accepts an optional address, to invoke a function on a
specific widget.
.TP
.B Menu <string>
open a menu with a given name
.TP
.B MenuClear <string>
delete a menu with a given name (This is useful if you want to generate
menus dynamically via PipeRead and would like to delete a previously
generated menu)
.TP
.B MenuItemClear <string>
delete a menu item with an id corresponding to the string. The menu item
must be declared with an id if you want to use this action on it.
.TP
.B PipeRead <string>
Process a snippet of configuration sourced from an output of a shell command
.TP
.B SwayCmd <string>
send a command over Sway IPC
.TP
.B SwayWinCmd <string>
send a command over Sway IPC applicable to a current window
.TP
.B MpdCmd <string>
send a command to Music Player Daemon
.TP
.B ClientSend <string>, <string>
send a string to a client. The string will be written to client\(aqs standard
input for execClient clients or written into a socket for socketClient\(aqs.
The first parameter is the client id, the second is the string to send.
.TP
.B SwitcherEvent <string>
trigger a switcher event, this action will bring up the switcher window and
cycle the focus either forward or back based on the argument. The string
argument can be either \(dqfoward\(dq or \(dqback\(dq. If the argument is omitted, the
focus will cycle forward.
.TP
.B MapIcon <app_id>, <icon>
use icon <icon> for applications with app id <app_id>.
.TP
.B SetMonitor [<bar_name>,]<string>
move bar to a given monitor. Bar_name string specifies a bar to move.
monitor name can be prefixed by \(dqstatic:\(dq, i.e. \(dqstatic:eDP\-1\(dq, if this
is set and the specified monitor doesn\(aqt exist or gets disconnected,
the bar will not jump to another montior, but will be hidden and won\(aqt
reappear until the monitor is reconnected.
** This action is deprecated, please use property \fImonitor\fP instead **
.TP
.B SetMirror  [<bar_name>,]<string>
mirror the bar to monitors matching any of the specified patterns. If
bar_name is specified, mirror instruction would be applied to specific
bar, otherwise it will be applied to all bars. The string parameter
specifies a colon delimited list of patters to match the monitors against,
i.e. \(dqeDP\-\fI:HDMI\-1\(dq will mirror to any monitor with name starting with
\(dqeDP\-\(dq or monitor named \(dqHDMI\-1\(dq. The patterns are specified in glob style
\(aq\fP\(aq and \(aq?\(aq are used as wildcards. A simplest use is \fISetMirror \(dq*\(dq\fP will
mirror all bars across all monitors.
** This action is deprecated, please use property \fImirror\fP instead **
.TP
.B SetLayer [<bar_name>,]<string>
move bar to a specified layer (supported parameters are \(dqtop\(dq, \(dqbottom\(dq,
\(dqbackground\(dq and \(dqoverlay\(dq.
** This action is deprecated, please use property \fIlayer\fP instead **
.TP
.B SetBarSize [<bar_name>,]<string>
set size of the bar (width for top or bottom bar, height for left or right
bar). The argument is a string. I.e. \(dq800\(dq for 800 pixels or \(dq50%\(dq for
50% of screen size
** This action is deprecated, please use property \fIsize\fP instead **
.TP
.B SetBarMargin [<bar_name>,]<string>
set margin around the bar to the number of pixels specified by string.
** This action is deprecated, please use property \fImargin\fP instead **
.TP
.B SetBarSensor [<bar_name>],<string>
Specify whether the bar should be hidden once the pointer leaves the bar
window. Once hidden, the bar will popup again if the pointer touches the
sensor located along the screen edge along which the bar is placed.
String specifies the bar pop\-down delay in milliseconds.
** This action is deprecated, please use property \fIsensor\fP instead **
.TP
.B SetBarID <string>
specify bar ID to listen on for mode and hidden_state signals. If no
bar ID is specified, SfwBar will listen to signals on all IDs
** This action is deprecated, please use property \fIsway_bar_id\fP instead **
.TP
.B SetExclusiveZone [<bar_name>,]<string>
specify exclusive zone policy for the bar window. Acceptable values are
\(dqauto\(dq, \(dq\-1\(dq, \(dq0\(dq or positive integers. These have meanings in line with
exclusive zone setting in the layer shell protocol. Default value is \(dqauto\(dq
** This action is deprecated, please use property \fIexclusive_zone\fP instead **
.TP
.B SetValue [<widget>,]<string>
set the value of the widget. This action applies to the widget from which
the action chain has been invoked. I.e. a widget may popup a menu, which
in turn will call a function, which executed SetValue, the SetValue will
still ac upon the widget that popped up the menu.
.TP
.B SetStyle [<widget>,]<string>
set style name for a widget
.TP
.B SetTooltip [<widget>,]<string>
set tooltip text for a widget
.TP
.B UserState <string>
Set boolean user state on a widget. Valid values are \(dqOn\(dq or \(dqOff\(dq.
.TP
.B Focus
set window to focused
.TP
.B Close
close a window
.TP
.B Minimize
minimize a window (send to scratchpad in sway)
.TP
.B UnMinimize
unset a minimized state for the window
.TP
.B Maximize
maximize a window (set fullscreen in sway)
.TP
.B UnMaximize
unset a maximized state for the window
.UNINDENT
.SS Functions
.sp
Functions are sequences of actions. They are used when multiple actions need
to be execute on a single triggeer. A good example of this functionality is
dynamically constructed menus generated by an external script:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
function(\(dqfancy_menu\(dq) {
  MenuClear \(dqdynamic_menu\(dq
  PipeRead \(dq$HOME/bin/buildmenu.sh\(dq
  Menu \(dqdynamic_menu\(dq
}
.EE
.UNINDENT
.UNINDENT
.sp
The above example clears a menu, executes a script that builds a menu again
and opens the resulting menu.
.sp
Function \(dqSfwBarInit\(dq executed on startup. You can use this function to set
initial parameters for the bar, such as default monitor and layer.
.SS Scanner
.sp
SFWBar widgets display data obtained from various sources. These can be files
or output of commands.
.sp
Each source section contains one or more variables that SFWBar will poll
periodically and populate with the data parsed from the source. The sources
and variables linked to them as configured in the section \fBscanner\fP
.INDENT 0.0
.INDENT 3.5
.sp
.EX
scanner {
  File(\(dq/proc/swaps\(dq,NoGlob) {
    SwapTotal = RegEx(\(dq[\et ]([0\-9]+)\(dq)
    SwapUsed = RegEx(\(dq[\et ][0\-9]+[\et ]([0\-9]+)\(dq)
  }
  Exec(\(dqgetweather.sh\(dq) {
    WeatherTemp = Json(\(dq.forecast.today.degrees\(dq)
  }
  ExecClient(\(dqstdbuf \-oL foo.sh BAR BAZ\(dq, \(dqfoo\(dq) {
    Foo_foo = Json(\(dq.foo\(dq)
    Foo_bar = Json(\(dq.bar\(dq)
  }
}
.EE
.UNINDENT
.UNINDENT
.sp
Each declaration within the \fBscanner\fP section specifies a source. This can
be one of the following:
.INDENT 0.0
.TP
.B File
Read data from a file
.TP
.B Exec
Read data from an output of a shell command
.TP
.B ExecClient
Read data from an executable, this source will wait for any output from
the standard output of the executable. Once available (i.e. the program
flushes its output) the source will populate the variables and emit a
trigger event.  This source accepts two parameters, command to execute
and an id. The id can be used to write to the standard input of the
executable via ClientSend (provided that the executable takes standard
input) and to identify a trigger emitted upon variable updates.
USE RESPONSIBLY: If a trigger causes the client to receive new data
(i.e. by triggering a ClientSend command that in turn triggers response
from the source, you can end up with an infinite loop.
(see alsa.widget and rfkill\-wifi.widget as examples).
.TP
.B SocketClient
Read data from a socket, this source will read a bust of data
using it to populate the variables and emit a trigger event once done.
This source accepts two parameters, a socket address and an id. The
id is used to address the socket via ClientSend and to identify a
trigger emitted upon variable updates.
USE RESPONSIBLY: If a trigger causes the client to receive new data
(i.e. by triggering a ClientSend command that in turn triggers response
from the source, you can end up with an infinite loop.
.TP
.B MpdClient
Read data from Music Player Daemon IPC (data is polled whenever MPD
responds to an \(aqidle player\(aq event).  MpdClient emits trigger \(dqmpd\(dq.
(see mpd\-int.widget as an example)
.TP
.B SwayClient
Receive updates on Sway state, updates are the json objects sent by
sway, wrapped into an object with a name of the event i.e.
\fBwindow: { sway window change object }\fP\&.
SwayClient emits trigger \(dqsway\(dq.
(see sway\-lang.widget as an example).
.UNINDENT
.sp
The file source also accepts further optional arguments specifying how
scanner should handle the source, these can be:
.INDENT 0.0
.TP
.B NoGlob
specifies that SFWBar shouldn\(aqt attempt to expand the pattern in
the file name. If this flag is not specified, the file source will
attempt to read from all files matching a filename pattern.
.TP
.B CheckTime
indicates that the program should only update the variables from
this file when file modification date/time changes.
.UNINDENT
.sp
\fBVariables\fP are extracted from sources using parsers, currently the following
parsers are supported:
.INDENT 0.0
.TP
.B Grab([Aggregator])
specifies that the data is copied from the file verbatim
.TP
.B RegEx(Pattern[,Aggregator])
extracts data using a regular expression parser, the variable is assigned
data from the first capture buffer
.TP
.B Json(Path[,Aggregator])
extracts data from a json structure. The path starts with a separator
character, which is followed by a path with elements separated by the
same character. The path can contain numbers to indicate array indices
i.e. \fB\&.data.node.1.string\fP and key checks to filter arrays, i.e.
\fB\&.data.node.[key=\(dqblah\(dq].value\fP
.UNINDENT
.sp
Optional aggregators specify how multiple occurrences of numeric data are
treated. The following aggregators are supported:
.INDENT 0.0
.TP
.B First
Variable should be set to the first occurrence of the pattern in the source
.TP
.B Last
Variable should be set to the last occurrence of the pattern in the source
.TP
.B Sum
Variable should be set to the sum of all occurrences of the pattern in the
source
.TP
.B Product
Variable should be set to the product of all occurrences of the pattern in
the source
.UNINDENT
.sp
For string variables, Sum and Product aggregators are treated as Last.
.SS Global Options
.INDENT 0.0
.TP
.B Theme <string>
Override a Gtk theme to name specified.
.TP
.B IconTheme <string>
Override a Gtk icon theme.
.TP
.B DisownMinimized <boolean>
Disassociate windows from their workplaces when they are minimized.
If this option is set, selecting a minimize window will unminimize
it on the active workplace. If set to False (default), the window
will be unminimzied to it\(aqs last workplace.
This option only applies to Sway and Hyprland comositors
.TP
.B FilterTitle <regex>
Any windows with titles matching a regular expression <regex> will
not be shown on the taskbar or switcher.
.TP
.B FilterAppId <regex>
Any windows with appids matching a regular expression <regex> will
not be shown on the taskbar or switcher.
.TP
.B TriggerAction <trigger>, <action>
execute an action when a trigger is emitted. Trigger is a string, an
action is any valid action, as described in the Actions section.
.UNINDENT
.SS EXPRESSIONS
.sp
Values in widgets can contain basic arithmetic and string manipulation
expressions. These allow transformation of data obtained by the scanner before
it is displayed by the widgets.
.sp
The numeric operations are:
.TS
box center;
l|l.
T{
Operation
T}	T{
Description
T}
_
T{
\fB+\fP
T}	T{
addition
T}
_
T{
\fB\-\fP
T}	T{
subtraction
T}
_
T{
\fB*\fP
T}	T{
multiplication
T}
_
T{
\fB/\fP
T}	T{
division
T}
_
T{
\fB%\fP
T}	T{
remainder of an integer division
T}
_
T{
\fB>\fP
T}	T{
greater than
T}
_
T{
\fB>=\fP
T}	T{
greater than or equal
T}
_
T{
\fB<\fP
T}	T{
less than
T}
_
T{
\fB>=\fP
T}	T{
less than or equal
T}
_
T{
\fB=\fP
T}	T{
equal
T}
_
T{
\fBVal\fP
T}	T{
convert a string into a number, the argument is a string or a
string expression to convert.
T}
_
T{
\fBIf\fP
T}	T{
conditional: If(condition,expr1,expr2)
T}
_
T{
\fBCached\fP
T}	T{
get last value from a variable without updating it:
Cached(identifier)
T}
_
T{
\fBIdent\fP
T}	T{
Check if an identifier exists either as a variable or a function
T}
.TE
.sp
The string operations are:
.TS
box center;
l|l.
T{
Operation
T}	T{
Description
T}
_
T{
\fB+\fP
T}	T{
concatenate strings i.e. \fB\(dq\(aqString\(aq+$Var\(dq\fP\&.
T}
_
T{
\fBMid\fP
T}	T{
extract substring i.e. \fBMid($Var,2,5)\fP
T}
_
T{
\fBExtract\fP
T}	T{
extract a regex pattern i.e.
\fBExtract($Var,\(aqFindThis: (GrabThat)\(aq)\fP
T}
_
T{
\fBStr\fP
T}	T{
convert a number into a string, the first argument is a number (or
a numeric expression), the second argument is decimal precision.
If precision is omitted, the number is rounded to the nearest
integer.
T}
_
T{
\fBPad\fP
T}	T{
pad a string to be n characters long, the first parameter is a
string to pad, the second is the desired number of characters,
if the number is negative, the string is padded at the end, if
positive, the string is padded at the front. The third optional
string parameter specifies the character to pad the string with.
T}
_
T{
\fBUpper\fP
T}	T{
Convert a string to upper case
T}
_
T{
\fBLower\fP
T}	T{
Convert a string to lower case
T}
_
T{
\fBEscape\fP
T}	T{
Sanitize text input for label widget.
T}
_
T{
\fBRead\fP
T}	T{
Read contents of a file into a string
T}
_
T{
\fBReplace\fP
T}	T{
Replace one substring with another within a string
\fBReplace (string, old, new)\fP
T}
_
T{
\fBLookup\fP
T}	T{
lookup a numeric value within a list of tuplets, the function call
is \fBLookup(Value, Threshold1, String1, ..., DefaultString)\fP\&. The
function checks value against a thresholds and returns a String
associated with the highest threshold matched by the Value. If the
Value is lower than all thresholds, DefaultString is returned.
Thresholds in the function call must be in decreasing order.
T}
_
T{
\fBMap\fP
T}	T{
Match a string within a list of tuplets, the usage is:
\fBMap(Value, Match1,String\(ga,...,DefaultString)\fP\&. The function will
match Value against all Match strings and will return a
corresponding String, if none of the Match strings match, the
function will return DefaultString.
T}
_
T{
\fBReplaceAll\fP
T}	T{
Perform multiple substring replacements in a string,
\fBReplaceAll(string, old1, new1, ... )\fP
T}
.TE
.sp
In addition the following query functions are supported
.TS
box center;
l|l.
T{
Function
T}	T{
Description
T}
_
T{
\fBTime\fP
T}	T{
get current time as a string, the first optional argument
specifies the format, the second argument specifies a timezone.
Return a string
T}
_
T{
\fBElapsedStr\fP
T}	T{
format a time interval specified in second into an elapsed time
string, i.e. \fIJust now\fP or \fI5 minutes ago\fP\&.
T}
_
T{
\fBDisk\fP
T}	T{
get disk utilization data. You need to specify a mount point as
a first argument and data field as a second. The supported data
fields are \(dqtotal\(dq, \(dqavail\(dq, \(dqfree\(dq, \(dq%avail\(dq, \(dq%free\(dq or
\(dq%used\(dq.  Returns a number.
T}
_
T{
\fBActiveWin\fP
T}	T{
get the title of currently focused window. Returns a string.
T}
_
T{
\fBGtkEvent\fP
T}	T{
Get the location of an event that triggered the action. This
function is only applicable in action command expressions where
an action is called as a result of button click. The function
returns location of the click within the widget. The value is
returned as percentage of the widget width or height.
Acceptable arguments are \(dqX\(dq,\(dqY\(dq and \(dqDir\(dq. X and Y select an
axis for which to return the event location, Dir returns the
event location along the widget direction property.
T}
_
T{
\fBBarDir\fP
T}	T{
get direction property of the taskbar holding the current
widget. Returns a string: \(dqleft\(dq, \(dqright\(dq, \(dqtop\(dq, \(dqbottom\(dq or
\(dqunknown\(dq.
T}
_
T{
\fBWidgetID\fP
T}	T{
Obtain an ID of the current widget (i.e. a widget in respect to
which the expression is being evaluated.
T}
_
T{
\fBWindowInfo\fP
T}	T{
Obtain information about a window. This function takes window
property as a single input parameter. Valid properties are:
\fIappid\fP, \fItitle\fP, \fIminimized\fP, \fImaximized\fP, \fIfullscreen\fP,
\fIfocused\fP
T}
.TE
.sp
Each numeric variable contains four values
.INDENT 0.0
.TP
.B \&.val
current value of the variable
.TP
.B \&.pval
previous value of the variable
.TP
.B \&.time
time elapsed between observing .pval and .val
.TP
.B \&.age
time elapsed since variable was last updated
.TP
.B \&.count
a number of time the pattern has been matched
during the last scan
.UNINDENT
.sp
By default, the value of the variable is the value of .val.
String variables are prefixed with $, i.e. $StringVar
The following string operation are supported. For example:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
$MyString + Str((MyValue \- MyValue.pval)/MyValue.time),2)
.EE
.UNINDENT
.UNINDENT
.sp
User defined expression macros are supported via top\-level \fBdefine\fP
keyword. I.e.
.INDENT 0.0
.INDENT 3.5
.sp
.EX
define MyExpr = VarA + VarB * VarC + Val($Complex)
\&...
value = Str(MyExpr,2)
.EE
.UNINDENT
.UNINDENT
.sp
The above will expand the expression into:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
value = Str(VarA + VarB * VarC + Val($Complex),2)
.EE
.UNINDENT
.UNINDENT
.sp
Macro\(aqs don\(aqt have types, as they perform substitution before the
expression is evaluated.
.sp
Intermediate variables can be declared using a toplevel \fBset\fP keyword
I.e.
.INDENT 0.0
.INDENT 3.5
.sp
.EX
set MyExpr = VarA + VarB * VarC + Val($Complex
\&...
value = Str(MyExpr,2)
.EE
.UNINDENT
.UNINDENT
.sp
In the above example, value of the MyExpr variable will be calculated and
the result will be used in computing the value expression. Intermediate
variables have type and have all of the fields of a scan variable (i.e. val,
pval, time etc). They can be used the same way as scan variables.
.SH MISCELLANEOUS
.sp
If the icon is missing for a specific program in the taskbar or switcher, it
is likely due to an missing icon or application not setting app_id correctly.
You can check app_id\(aqs of running programs by running sfwbar \-d \-g app_id.
if app_id is present, you need to add an icon with the appropriate name to
your icon theme. If it\(aqs blank, you can try mapping it from the program\(aqs title
(please note that the title may change during runtime, so matching it can be
tricky). Mapping is supported via top\-level \fBMapAppId\fP keyword. I.e.
.INDENT 0.0
.INDENT 3.5
.sp
.EX
MapAppId app_id, pattern
.EE
.UNINDENT
.UNINDENT
.sp
where app_id is the desired app_id and pattern is a regular expression to
match the title against.
.sp
If you are using an XWayland app, they usually do not have an \fIapp_id\fP set. If
an icon is not showing, you can add your icon to the following locations:
1. \fI$HOME/.icons\fP
2. One of the directories listed in \fI$XDG_DATA_DIRS/icons\fP
3. \fI/usr/share/pixmaps\fP
4. Location of the main config file currently in use
5. \fI$XDG_CONFIG_HOME/sfwbar/\fP
.sp
If an \fIapp_id\fP is not set, and sway is being used, sfwbar will fallback to
using the \fIinstance\fP in the \fIwindow\-properties\fP\&.
.sp
You can find the \fIapp_id\fP that is being used with sfwbar by using the
\fIsfwbar \-d \-g app_id\fP command, which will show a list of running applications
if your compositor supports the
wlr\-foreign\-toplevel protocol (i.e. labwc, wayfire, sway):
\fB\(ga
14:49:25.41 app_id: \(aqjetbrains\-clion\(aq, title \(aqsfwbar – pager.c\(aq
\(ga\fP
.sp
Alternatively your desktop environment might have a command to display a list:
\- Sway: \fIswaymsg \-t get_tree\fP
\- Hyperland: \fIhyprctl \-j clients\fP
.sp
When using \fIswaymsg \-t get_tree\fP, with CLion this will show the following:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
\(dqwindow_properties\(dq: {
  \(dqclass\(dq: \(dqjetbrains\-clion\(dq,
  \(dqinstance\(dq: \(dqjetbrains\-clion\(dq,
  \(dqtitle\(dq: \(dqsfwbar – trayitem.c\(dq,
  \(dqtransient_for\(dq: null,
  \(dqwindow_type\(dq: \(dqnormal\(dq
}
.EE
.UNINDENT
.UNINDENT
.sp
So we can put an icon called jetbrains\-clion.svg (or other formats, see the
[Arch wiki]( <https://wiki.archlinux.org/title/desktop_entries#Icons> )) for
information about file formats.
.SH CSS STYLE
.sp
SFWBar uses gtk+ widgets and can accept all css properties supported by
gtk+. SFWBar widgets correspond to gtk+ widgets as following:
.TS
box center;
l|l|l.
T{
SFWBar widget
T}	T{
gtk+ widget
T}	T{
css class
T}
_
T{
label
T}	T{
GtkLabel
T}	T{
label
T}
_
T{
image
T}	T{
GtkImage
T}	T{
image
T}
_
T{
button
T}	T{
GtkButton
T}	T{
button
T}
_
T{
scale
T}	T{
GtkProgressBar
T}	T{
progressbar, trough, progress
T}
.TE
.sp
Taskbar, Pager, Tray and Switcher use combinations of these widgets and can
be themed using gtk+ nested css convention,
i.e. \fBgrid#taskbar button { ... }\fP
(this example assumes you assigned \fBstyle = taskbar\fP to your taskbar
widget).
.sp
In addition to standard gtk+ css properties SFWBar implements several
additional properties. These are:
.TS
box center;
l|l.
T{
property
T}	T{
description
T}
_
T{
\-GtkWidget\-align
T}	T{
specify text alignment for a label, defined as a fraction.
(0 = left aligned, 1 = right aligned, 0.5 = centered)
T}
_
T{
\-GtkWidget\-ellipsize
T}	T{
specify whether a text in a label should be ellipsized if
it\(aqs too long to fit in allocated space
T}
_
T{
\-GtkWidget\-wrap
T}	T{
wrap a string if it\(aqs too long for it\(aqs container (you
would usually want to pair it with \-GtkWidget\-max\-width)
T}
_
T{
\-GtkWidget\-direction
T}	T{
specify a direction for a widget.
For scale, it\(aqs a direction towards which scale grows.
For a grid, it\(aqs a direction in which a new widget is
position relative to the last placed widget. For a
window it\(aqs an edge along which the bar is positioned.
Possible values [top|bottom|left|right]
T}
_
T{
\-GtkWidget\-max\-width
T}	T{
Limit maximum width of a widget (in pixels)
T}
_
T{
\-GtkWidget\-max\-height
T}	T{
Limit maximum height of a widget (in pixels)
T}
_
T{
\-GtkWidget\-hexpand
T}	T{
specify if a widget should expand horizontally to occupy
available space. [true|false]
T}
_
T{
\-GtkWidget\-vexpand
T}	T{
as above, for vertical expansion.
T}
_
T{
\-GtkWidget\-halign
T}	T{
Horizontally align widget within any free space allocated
to it, values supported are: fill, start, end, center and
baseline. The last vertically aligns widgets to align
text within.
T}
_
T{
\-GtkWidget\-valign
T}	T{
Vertically align widget.
T}
_
T{
\-GtkWidget\-visible
T}	T{
Control visibility of a widget. If set to false, widget
will be hidden.
T}
_
T{
\-ScaleImage\-color
T}	T{
Specify a color to repaint an image with. The image will
be painted with this color using image\(aqs alpha channel as
a mask. The color\(aqs own alpha value can be used to tint
an image.
T}
_
T{
\-ScaleImage\-symbolic
T}	T{
Render an image as a symbolic icon. If set to true, the
image will be re\-colored to the gtk theme foreground
color, preserving the image alpha channel. This property
is ignored if \-ScaleImage\-color is specified.
T}
.TE
.sp
Taskbar and pager buttons are assigned the following styles
.TS
box center;
l|l.
T{
style name
T}	T{
description
T}
_
T{
sfwbar
T}	T{
toplevel bar window
T}
_
T{
layout
T}	T{
top level layout grid
T}
_
T{
taskbar_normal
T}	T{
taskbar button for a window
T}
_
T{
taskbar_active
T}	T{
taskbar button for currently focused window
T}
_
T{
takbar_popup_normal
T}	T{
taskbar popup button
T}
_
T{
takbar_popup_active
T}	T{
taskbar popup button for group containing active window
T}
_
T{
taskbar_pager_normal
T}	T{
taskbar pager grid
T}
_
T{
taskbar_pager_active
T}	T{
taskbar pager grid for currently active workspace
T}
_
T{
pager_normal
T}	T{
pager button for a workspace
T}
_
T{
pager_visible
T}	T{
pager button for a visible workspace
T}
_
T{
pager_focused
T}	T{
pager button for a currently focused workspace
T}
_
T{
switcher
T}	T{
switcher window and top level grid
T}
_
T{
switcher_active
T}	T{
switcher active window representation
T}
_
T{
switcher_normal
T}	T{
switcher inactive window representation
T}
_
T{
tray
T}	T{
tray menus and menu items
T}
_
T{
tray_active
T}	T{
active tray icon
T}
_
T{
tray_attention
T}	T{
tray icon requiring user attention
T}
_
T{
tray_passive
T}	T{
passive tray icon
T}
_
T{
menu_item
T}	T{
menu items (each contains an image and a label)
T}
.TE
.sp
For example you can style top level grid using \fBgrid#layout { }\fP\&.
.\" Generated by docutils manpage writer.
.

.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "SFWBAR"  "" ""
.SH NAME
SFWBar \- SFWBar - Widget Wizardry Manual
.sp
Sfwbar provides necessary features to develop reasonably sophisticated and
efficient user defined widgets. There are four main components involved in
developing a widget:
.sp
1. Scanner sources \- to facilitate gathering of the information to display
1. Expression engine \- to manipulate the data sourced by the scanner
1. Layout widgets \- to display the data and results of computations
1. Actions \- to manipulate the state
.SH WIDGET EFFICIENCY
.sp
The original rationale for development of the Sfwbar\(aqs predecessor was
facilitation of efficient widget construction. A common approach to status bar
widget implementation involves periodic execution of a shell script which
reads data from output of commands or system files, parses the contents,
performs necessary calculations or text manipulations on the data and outputs
the result in a format useable by the widget.
.sp
The above approach can be very inefficient for information requiring high
frequency of updates. The status bar executes a shell, which loads a script,
which may in turn execute a number of other executables to source and
manipulate the data. The outcome is a multitude of fork\(aqs and image loads,
which are executed on a regular basis. This ultimately requires a trade\-off
between the frequency of updates and the system load.
.sp
Sfwbar provides basic functionality that allows polling for data, extracting
information from this data and manipulating it into output useable by status
bar widgets.
.SH BASIC STEPS
.sp
These are the basic steps involved in creating a widget:
.SS GET DATA
.sp
Data can obtained from variety of sources. On a typical linux system, a lot
of system information is exposed via /proc and /sys filesystems. On BSD systems
this information would be available via a sysctl call. Some systems expose and
update variety of information via sockets or have client utilities that can
provide asynchronous status updates via stdout. As a last resort, we can fall
back to periodic execution of a program that would output the information we
need, although in some cases we can improve the efficientcy of this approach
by using a status change notification from one of the more efficient methods.
.SH EXTRACT DATAPOINTS
.sp
The data we obtain from various sources isn\(aqt always presented in a directly
useable format. We may need to parse these data dumps to extract the data
points we need. Sfwbar allows extracting information the data dump using
regular expression or json parsers. I.e. if the /proc file contains several
strings of text, sfwbar can identify a string matching a pattern, extract a
segment of this string, using a regular expression capture buffer and save this
outout in an internal variable. Sfwbar can extract multiple patterns from the
same data dump and populate multiple variables.
.SH MANIPULATE INFORMATION
.sp
Once information is parsed, we can manipulate it into a format we need for
display. It can be something simple, such as rounding a number for decimal
precision or a complex requiring flow control, mathematical calculations and
text manipulation (i.e. calculating color gradients and generating an svg
image on the fly).
.SH VISUALIZE OUTPUT
.sp
Once we have the data in the format we need, we need to create a visual
representation to be presented to a user. This can be a simple text string
displayed on the status bar, an icon with a name derived from the data we
gathered, an image we generated on the fly, a scale showing a fraction or
a chart showing evolution of the data point over time.
.\" Generated by docutils manpage writer.
.
